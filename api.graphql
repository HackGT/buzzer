# Proposed interface
# API gets 'msg' and 'medium'
# 

schema {
  query: Query
}

# Message, Mode: (TARGET, ANNOUNCE)
# - Announce:
#   - Facebook, Twitter, Slack @announcements, Live Site
# - Target:
#   - Email, Twilio, Slacking PMs
# message, group, and medium
# for each medium, we have a mapping to a group
# Email: - select user list via tags
# Mobile: - same thing as email
# Slack: - send to general with prepended/preformatted [TAG NAME]
#        - or direct PMs
# Tweet: No targetting - ( provide disclaimer )
# Push notification: - can we target? api tokens
type Query {
  sendMessage(message: String!, plugins: PluginMaster!): PluginReturn!
}

enum Status {
  SUCCESS
  ERROR
  NULL
}

input PluginMaster {
  email: EmailConfig,
  facebook: FacebookConfig,
  liveSite: LiveSiteConfig,
  twitter: TwitterConfig,
  slack: SlackConfig
}

type PluginReturn {
  email: Status,
  facebook: Status,
  liveSite: Status,
  twitter: Status,
  slack: Status
}

# Dummies
input EmailConfig {
  name: String!
}

input FacebookConfig {
  name: String!
}

input LiveSiteConfig {
  notificationType: String
}

input TwitterConfig {
  name: String!
}

# Remove when implemented
input SlackConfig {
  channels: [String!]!
}
